@echo off

call MKCLEAN.BAT
if not exist BIN mkdir BIN

rem Make First Dos Demo
NASM.EXE -IDEMOS\ DEMOS\DEMO_001.ASM -fbin -O9 -o BIN\DEMO_001.COM
NASM.EXE -IDEMOS\ DEMOS\DEMO_002.ASM -fbin -O9 -o BIN\DEMO_002.COM
NASM.EXE DEMOS\DEMO_003.ASM -fbin -O9 -o BIN\DEMO_003.COM

rem goto TP55
rem Make TurboPascal 7.0 Dos Demo
NASM QCRT.ASM -fobj -DTP70 -O9 -o PASCAL\QCRT.OBJ
TPC /OPASCAL /b PASCAL\QCRT.PAS
if not exist PASCAL\QCRT.TPU goto TP55
TPC /OPASCAL /UPASCAL /EBIN DEMOS\DEMO_004.PAS

goto DEMO5

:TP55
rem Turbo Pascal 5.5 Fallback
echo Fallback to Turbo Pascal 5.5
NASM QCRT.ASM -fobj -DTP55 -O9 -o PASCAL\QCRT.OBJ
call TPC55 /OPASCAL /b PASCAL\QCRT.PAS
call TPC55 /OPASCAL /UPASCAL /EBIN DEMOS\DEMO_004.PAS

:DEMO5
